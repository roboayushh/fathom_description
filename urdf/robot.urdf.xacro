<?xml version="1.0" ?>
<robot name="auv" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- <xacro:include filename="$(find auv_description)/urdf/plugins.urdf"/>
  <xacro:include filename="$(find auv_description)/urdf/sensors.urdf"/> -->
  <xacro:include filename="$(find auv_description)/urdf/plugins_and_sensors.urdf"/>

  <link name="base_link">
    <!-- Inertial properties -->
    <inertial>
      <origin xyz="0 0 -0.59" rpy="0 0 0"/>
      <mass value="1862.87"/>
      <inertia 
        ixx="525.39" ixy="1.44" ixz="33.41"
        iyy="794.20" iyz="2.6"  izz="691.23"/>
    </inertial>

    <!-- Visual mesh -->
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/RexROV_no_props.dae" scale="1 1 1"/>
      </geometry>
    </visual>

    <!-- Collision: bottom plate -->
    <collision>
      <origin xyz="0 0 -0.75" rpy="0 0 0"/>
      <geometry>
        <box size="2.56 1.50 0.10"/>
      </geometry>
    </collision>

    <!-- Collision: top plate -->
    <collision>
      <origin xyz="0 0 0.60" rpy="0 0 0"/>
      <geometry>
        <box size="2.56 1.50 0.40"/>
      </geometry>
    </collision>

    <!-- Collision: left side -->
    <collision>
      <origin xyz="-0.20 0.70 -0.15" rpy="0 0 0"/>
      <geometry>
        <box size="2.20 0.10 1.10"/>
      </geometry>
    </collision>

    <!-- Collision: right side -->
    <collision>
      <origin xyz="0.20 -0.70 -0.15" rpy="0 0 0"/>
      <geometry>
        <box size="2.20 0.10 1.10"/>
      </geometry>
    </collision>
  </link>

<!-- Camera Link -->
  <link name="camera_link">
    <!-- Inertial -->
    <inertial>
      <mass value="0.1"/>
      <inertia 
        ixx="0.000166667" ixy="0.0" ixz="0.0"
        iyy="0.000166667" iyz="0.0" izz="0.000166667"/>
    </inertial>

    <!-- Collision -->
    <collision>
      <geometry>
        <box size="0.1 0.1 0.1"/>
      </geometry>
    </collision>

    <!-- Visual -->
    <visual>
      <geometry>
        <box size="0.1 0.1 0.1"/>
      </geometry>
    </visual>
  </link>

  <!-- Fixed joint between base_link and camera_link -->
  <joint name="camera_joint" type="fixed">
    <origin xyz="1.33 0 -0.74" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="camera_link"/>
  </joint>

  <!-- Magnetometer Link -->
  <link name="magnetometer_link">
    <!-- <origin xyz="0 0 0" rpy="0 0 0"/> -->

    <inertial>
      <mass value="0.015"/>
      <inertia
        ixx="0.00001" ixy="0.0" ixz="0.0"
        iyy="0.00001" iyz="0.0" izz="0.00001"/>
    </inertial>
  </link>

    <joint name="magnetometer_joint" type="fixed">
      <origin xyz='0 0 0' rpy='0 0 0'/>
      <parent>base_link</parent>
      <child>magnetometer_link</child>
    </joint>

    <link name="imu_link">
      <inertial>
        <!-- <origin xyz='0 0 0' rpy='0 0 0'/> -->
        <mass>0.015</mass>
        <inertia>
          <ixx>0.00001</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>0.00001</iyy>
          <iyz>0.0</iyz>
          <izz>0.00001</izz>
        </inertia>
      </inertial>
    </link>

    <joint name="imu_joint" type="fixed">
      <origin xyz='0 0 0' rpy='0 0 0'/>
      <parent>base_link</parent>
      <child>imu_link</child>
    </joint>

    <!-- <link name="dvl_link">
      <origin xyz='-1.34 0 -0.75' rpy='0 0 -1.57'/>
      <inertial>
        <mass>3.5</mass>
        <inertia>
          <ixx>0.0195872</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.0195872</iyy>
          <iyz>0</iyz>
          <izz>0.0151357</izz>
        </inertia>
      </inertial>
      <velocity_decay />
      <gravity>1</gravity>
      <velocity_decay />

      <self_collide>0</self_collide>
      <enable_wind>0</enable_wind>
      <kinematic>0</kinematic>
      <visual name="dvl_link_visual">
        <origin xyz='0 0 0' rpy='0 0 3.14159'/>
        <geometry>
          <mesh>
            <scale>1 1 1</scale>
            <uri>model://meshes/nortek_dvl500_300/DVL500-300m.dae</uri>
          </mesh>
        </geometry>
        <transparency>0</transparency>
        <cast_shadows>1</cast_shadows>
      </visual>
      <collision name="dvl_link_collision">
        <laser_retro>0</laser_retro>
        <max_contacts>10</max_contacts>
        <origin xyz='0 0 0' rpy='3.14159 0 0'/>
        <geometry>
          <cylinder>
            <radius>0.093</radius>
            <length>0.203</length>
          </cylinder>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>1</mu>
              <mu2>1</mu2>
              <fdir1>0 0 0</fdir1>
              <slip1>0</slip1>
              <slip2>0</slip2>
            </ode>
            <torsional>
              <coefficient>1</coefficient>
              <patch_radius>0</patch_radius>
              <surface_radius>0</surface_radius>
              <use_patch_radius>1</use_patch_radius>
              <ode>
                <slip>0</slip>
              </ode>
            </torsional>
          </friction>
          <bounce>
            <restitution_coefficient>0</restitution_coefficient>
            <threshold>1e+06</threshold>
          </bounce>
          <contact>
            <collide_without_contact>0</collide_without_contact>
            <collide_without_contact_bitmask>1</collide_without_contact_bitmask>
            <collide_bitmask>1</collide_bitmask>
            <ode>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
              <max_vel>0.01</max_vel>
              <min_depth>0</min_depth>
            </ode>
            <bullet>
              <split_impulse>1</split_impulse>
              <split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
            </bullet>
          </contact>
        </surface>
      </collision>
    </link> 
    <joint name="dvl_joint" type="fixed">
      <origin xyz="-1.34 0 -0.75" rpy="0 0 -1.57"/>
      <parent>base_link</parent>
      <child>dvl_link</child>
    </joint>
-->

  <!-- Thruster 1 -->
  <link name="thruster1">
    <!-- <origin xyz="-0.890895 0.334385 0.528822" rpy="0 -1.300794 -0.928689"/>
    <inertial> -->
      <mass value="0.001"/>
      <inertia ixx="0.0005" ixy="0" ixz="0"
              iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.000001" radius="0.000001"/>
      </geometry>
    </collision>
  </link>

  <joint name="thruster1_joint" type="revolute">
    <origin xyz="-0.890895 0.334385 0.528822" rpy="0 -1.300794 -0.928689"/>
    <parent link="base_link"/>
    <child link="thruster1"/>
    <axis xyz="1 0 0"/>
    <limit effort="100" lower="-1000" upper="1000" velocity="100"/>
  </joint>


  <!-- Thruster 2 -->
  <link name="thruster2">
    <!-- <origin xyz="-0.890895 -0.334385 0.528822" rpy="0 -1.300794 0.928689"/> -->
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.0005" ixy="0" ixz="0"
              iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.000001" radius="0.000001"/>
      </geometry>
    </collision>
  </link>

  <joint name="thruster2_joint" type="revolute">
    <origin xyz="-0.890895 -0.334385 0.528822" rpy="0 -1.300794 0.928689"/>
    <parent link="base_link"/>
    <child link="thruster2"/>
    <axis xyz="1 0 0"/>
    <limit effort="100" lower="-1000" upper="1000" velocity="100"/>
  </joint>


  <!-- Thruster 3 -->
  <link name="thruster3">
    <!-- <origin xyz="0.890895 0.334385 0.528822" rpy="0 -1.840798 0.928689"/> -->
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.0005" ixy="0" ixz="0"
              iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.000001" radius="0.000001"/>
      </geometry>
    </collision>
  </link>

  <joint name="thruster3_joint" type="revolute">
    <origin xyz="0.890895 0.334385 0.528822" rpy="0 -1.840798 0.928689"/>
    <parent link="base_link"/>
    <child link="thruster3"/>
    <axis xyz="1 0 0"/>
    <limit effort="100" lower="-1000" upper="1000" velocity="100"/>
  </joint>


  <!-- Thruster 4 -->
  <link name="thruster4">
    <!-- <origin xyz="0.890895 -0.334385 0.528822" rpy="0 -1.300794 -0.928689"/> -->
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.0005" ixy="0" ixz="0"
              iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.000001" radius="0.000001"/>
      </geometry>
    </collision>
  </link>

  <joint name="thruster4_joint" type="revolute">
    <origin xyz="0.890895 -0.334385 0.528822" rpy="0 -1.300794 -0.928689"/>
    <parent link="base_link"/>
    <child link="thruster4"/>
    <axis xyz="1 0 0"/>
    <limit effort="100" lower="-1000" upper="1000" velocity="100"/>
  </joint>


  <!-- Thruster 5 -->
  <link name="thruster5">
    <!-- <origin xyz="-0.412125 0.505415 0.129" rpy="0 0 0.785398"/> -->
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.0005" ixy="0" ixz="0"
              iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.000001" radius="0.000001"/>
      </geometry>
    </collision>
  </link>

  <joint name="thruster5_joint" type="revolute">
    <origin xyz="-0.412125 0.505415 0.129" rpy="0 0 0.785398"/>
    <parent link="base_link"/>
    <child link="thruster5"/>
    <axis xyz="1 0 0"/>
    <limit effort="100" lower="-1000" upper="1000" velocity="100"/>
  </joint>


  <!-- Thruster 6 -->
  <link name="thruster6">
    <!-- <origin xyz="-0.412125 -0.505415 0.129" rpy="0 0 -0.785398"/> -->
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.0005" ixy="0" ixz="0"
              iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.000001" radius="0.000001"/>
      </geometry>
    </collision>
  </link>

  <joint name="thruster6_joint" type="revolute">
    <origin xyz="-0.412125 -0.505415 0.129" rpy="0 0 -0.785398"/>
    <parent link="base_link"/>
    <child link="thruster6"/>
    <axis xyz="1 0 0"/>
    <limit effort="100" lower="-1000" upper="1000" velocity="100"/>
  </joint>


  <!-- Thruster 7 -->
  <link name="thruster7">
    <!-- <origin xyz="0.412125 0.505415 0.129" rpy="0 0 2.356194"/> -->
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.0005" ixy="0" ixz="0"
              iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.000001" radius="0.000001"/>
      </geometry>
    </collision>
  </link>

  <joint name="thruster7_joint" type="revolute">
    <origin xyz="0.412125 0.505415 0.129" rpy="0 0 2.356194"/>
    <parent link="base_link"/>
    <child link="thruster7"/>
    <axis xyz="1 0 0"/>
    <limit effort="100" lower="-1000" upper="1000" velocity="100"/>
  </joint>


  <!-- Thruster 8 -->
  <link name="thruster8">
    <!-- <origin xyz="0.412125 -0.505415 0.129" rpy="0 0 -2.356194"/> -->
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.0005" ixy="0" ixz="0"
              iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file://$(find auv_description)/meshes/rexrov/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.000001" radius="0.000001"/>
      </geometry>
    </collision>
  </link>

  <joint name="thruster8_joint" type="revolute">
    <origin xyz="0.412125 -0.505415 0.129" rpy="0 0 -2.356194"/>
    <parent link="base_link"/>
    <child link="thruster8"/>
    <axis xyz="1 0 0"/>
    <limit effort="100" lower="-1000" upper="1000" velocity="100"/>
  </joint>

</robot>
